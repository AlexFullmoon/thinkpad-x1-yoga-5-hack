# ACPI files

## Standard files

### SSDT-PLUG

Adds PluginType for CPU power management. Pretty default one, you can grab grab sample from Dortania and edit as described there.

CPU ACPI location is `_SB_.PR00`.

### SSDT-USBX

USB power properties. Standard one. Usually paired with EC patch, but EC device in this laptop is present and correct.

### SSDT-PNLF

Backlight enabler for WEG. GPU location is `_SB_.PCI0.GFX0`. Using drop-in file from WEG.
The one generated by SSDTTime is smaller, but for some reason requires ACPI patch.

### SSDT-RTCAWAC

RTC fix. Standard one, get it either from Dortania or generate with SSDTTime. 

### SSDT-RHUB  

USB hub fix. Device location is `_SB_.PCI0.XHC.RHUB`. Standard one from Dortania or SSDTTime is okay. 

## Custom device-specific files

### SSDT-OSI, SSDT-XOSI

OS patches. For I2C trackpad and some other things.

So, what you need is to set several variables that would mean you are running certain OS — namely, WNTF (Windows 2000+), WIN8 (Windows 8+) and LNUX (Linux, duh), as well as OSYS (another variable, you'd want value for Windows 10). There are options on how to approach this. You can:

- Use bog-standard SSDT-XOSI from Dortania or this repo or elsewhere along with patch. DSDT checks for limited number of Windows versions, from Windows 200. to Windows 10. Upsides: it is simple and happens all in one place (namely, `_SB.PCI0._INI`). Downsides: you still need to set LNUX separately (YogaSMC requires it for Fn-F4 key, for example), and you need additional livepatch to DSDT.
- Use DSDT-OSI. This one will directly set those variables we need. Upsides: no patches. Downsides: they are set outside of `PCI0._INI` which may or may not cause bugs. Personally, it works fine for me.

Both options are written with multiboot checks.

### SSDT-ECFIX   

Additional EC devices.

First, there is a fix to AC adapter device — reportedly there are minot problems without it.

Then there are several interface methods for YogaSMC — it won't work without them.

### SSDT-Devices

Adding a bunch of missing devices. Some are required, some are only cosmetic.
- ALC0 — Fake ambient light sensor. Reportedly there are problems with backlight on laptops without one.
- PWRB — Real power button. Note: macOS reacts on button *release*.
- MCHC — Host Bridge/DRAM Registers, part of older SMBus patch stuff. Supposedly not necessary nowadays.
- PPMC — Fake and unclear what it does.
- GAUS — Core Processor Gaussian Mixture Model. Something something speech recognition coprocessor? Unclear if it even fake or real.
- BUS0 — Nissing SMBus device. Supposedly not necessary nowadays.
- DMAC — DMA controller. Required for dealing with replacement DMAR table.
- PMCR — Coffee Lake Thermal Controller. Cosmetic stuff, need to check if it even correct.

### DMAR         
Replacement DMA Regions table with Protected regions removed. Requires DMAC device from previous SSDT.

**!!MAKE YOUR OWN!!** With SSDTTime, for example. These tables may be specific to BIOS version. If using it, you **have to drop original** DMAR table.

Choose between using it, using DisableIOMapper quirk, or disabling VT-d in BIOS. Latter variant is preferred if you don't need it for other OSes.

Which way (quirk or DMAR) is preferable is unclear. OpenCore manual recommends quirk, but there are reports that cleaned DMAR table is better in some cases.

### SSDT‑HPET

IRQ patches for legacy devices. Traditional stuff, might not be necessary nowadays.

